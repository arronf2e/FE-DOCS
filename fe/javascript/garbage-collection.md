### JS 垃圾回收 

> javascript 具有自动垃圾收集机制（重点），原理：找出那些不再继续使用的变量，然后释放其占用的内存，垃圾回收器会按照固定的时间间隔周期性的执行这一操作。


#### 标记清除 （常见， mark and sweep）

>  垃圾收集器（garbage collector）在运行时候会给储存在内存中的所有变量都加上标记。然后，它会去掉环境中的变量以及被环境中的变量引用的变量的标记。而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。最后，垃圾收集器完成内存清除的工作。

几种算法： 
- 在JavaScript 中，全局变量（Global）和window 对象会一直存在，不会被垃圾收集器回收；
- 递归所用到的所有（包括变量和方法），都不会被回收；
- 所有没有被标记为“活跃（active）”的，都会被认为是垃圾，收集器释放会回收垃圾，并把内存还给操作系统。

```
function sum(num) {
    var sum += num;  // 垃圾收集已将这个变量标记为“进入环境"
    return sum;      // 垃圾收集已将这个变量标记为“离开环境”。
}
sum(20);
```




#### 引用记数 （Reference-counting garbage collection）

> 记录每一个值被引用的次数

```
var jack = {name: 'jack'}  // 被引用次数为 1
var marry = jack;          // 被引用次数为 2
jack = null;               // 被引用次数为 1，内存未被释放
marry = null;              // 被引用次数为 0，内存可以被释放
```





